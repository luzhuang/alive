!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Alive=e():t.Alive=e()}(window,function(){return function(t){var e={};function i(s){if(e[s])return e[s].exports;var r=e[s]={i:s,l:!1,exports:{}};return t[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(s,r,function(e){return t[e]}.bind(null,r));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/dist/",i(i.s=2)}([function(t,e,i){"use strict";var s=Object.prototype.hasOwnProperty,r=Object.prototype.toString,a=Object.defineProperty,n=Object.getOwnPropertyDescriptor,o=function(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===r.call(t)},h=function(t){if(!t||"[object Object]"!==r.call(t))return!1;var e,i=s.call(t,"constructor"),a=t.constructor&&t.constructor.prototype&&s.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!i&&!a)return!1;for(e in t);return void 0===e||s.call(t,e)},l=function(t,e){a&&"__proto__"===e.name?a(t,e.name,{enumerable:!0,configurable:!0,value:e.newValue,writable:!0}):t[e.name]=e.newValue},c=function(t,e){if("__proto__"===e){if(!s.call(t,e))return;if(n)return n(t,e).value}return t[e]};t.exports=function t(){var e,i,s,r,a,n,u=arguments[0],p=1,d=arguments.length,f=!1;for("boolean"==typeof u&&(f=u,u=arguments[1]||{},p=2),(null==u||"object"!=typeof u&&"function"!=typeof u)&&(u={});p<d;++p)if(null!=(e=arguments[p]))for(i in e)s=c(u,i),u!==(r=c(e,i))&&(f&&r&&(h(r)||(a=o(r)))?(a?(a=!1,n=s&&o(s)?s:[]):n=s&&h(s)?s:{},l(u,{name:i,newValue:t(f,n,r)})):void 0!==r&&l(u,{name:i,newValue:r}));return u}},function(t,e,i){var s=i(4),r=i(5),a=i(6),n=i(7),o=i(8),h=i(9),l=i(10);function c(t){return-1!=t.indexOf("deg")?parseFloat(t,10)*(2*Math.PI/360):-1!=t.indexOf("grad")?parseFloat(t,10)*(Math.PI/200):parseFloat(t,10)}t.exports=function(t){var e=t.match(/[A-z3]+\([^\)]+/g)||[],i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return e.forEach(function(t){var e,u=t.split("("),p=u[0],d=u[1];switch(p){case"matrix":e=[(d=d.split(",").map(parseFloat))[0],d[1],0,0,d[2],d[3],0,0,0,0,1,0,d[4],d[5],0,1];break;case"matrix3d":e=d.split(",").map(parseFloat);break;case"translate":case"translate3d":e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],2===(d=d.split(",").map(parseFloat)).length&&d.push(0),h(e,e,d);break;case"translateX":e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],d=[parseFloat(d),0,0],h(e,e,d);break;case"translateY":e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],d=[0,parseFloat(d),0],h(e,e,d);break;case"translateZ":e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],d=[0,0,parseFloat(d)],h(e,e,d);break;case"rotate":case"rotateZ":e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],d=c(d),a(e,e,d);break;case"scale":case"scale3d":e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],2===(d=d.split(",").map(parseFloat)).length&&d.push(1),o(e,e,d);break;case"scaleX":o(e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e,[parseFloat(d),1,1]);break;case"scaleY":o(e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e,[1,parseFloat(d),1]);break;case"scaleZ":o(e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e,[1,1,parseFloat(d)]);break;case"rotateX":e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],d=c(d),s(e,e,d);break;case"rotateY":e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],d=c(d),r(e,e,d);break;case"rotate3d":e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],d=d.split(","),n(e,e,c(d[3]),d.slice(0,3).map(parseFloat));break;case"perspective":e=[1,0,0,0,0,1,0,0,0,0,1,-1/(d=parseFloat(d)),0,0,0,1];break;case"skew":e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],d=d.split(",").map(c),e=[1,Math.tan(d[0]),0,0,Math.tan(d[1]),1,0,0,0,0,1,0,0,0,0,1];break;case"skewX":e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],d=c(d),e=[1,0,0,0,Math.tan(d),1,0,0,0,0,1,0,0,0,0,1];break;case"skewY":e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],d=c(d),e=[1,Math.tan(d),0,0,0,1,0,0,0,0,1,0,0,0,0,1];break;case"none":case"initial":break;default:throw new Error("unsupported transform function: "+p)}e&&l(i,i,e)}),i}},function(t,e,i){t.exports=i(11)},function(t,e){!function(t,e,i){"use strict";var s={relativeInput:!1,clipRelativeInput:!1,calibrationThreshold:100,calibrationDelay:500,supportDelay:500,calibrateX:!1,calibrateY:!0,invertX:!0,invertY:!0,limitX:!1,limitY:!1,scalarX:10,scalarY:10,frictionX:.1,frictionY:.1,originX:.5,originY:.5};function r(t,e){this.element=t,this.layers=t.viewersList.filter(function(t){return t.depth}),this.extend(this,s,e),this.calibrationTimer=null,this.calibrationFlag=!0,this.enabled=!1,this.depths=[],this.raf=null,this.bounds=null,this.ex=0,this.ey=0,this.ew=0,this.eh=0,this.ecx=0,this.ecy=0,this.erx=0,this.ery=0,this.cx=0,this.cy=0,this.ix=0,this.iy=0,this.mx=0,this.my=0,this.vx=0,this.vy=0,this.onMouseMove=this.onMouseMove.bind(this),this.onDeviceOrientation=this.onDeviceOrientation.bind(this),this.onOrientationTimer=this.onOrientationTimer.bind(this),this.onCalibrationTimer=this.onCalibrationTimer.bind(this),this.onAnimationFrame=this.onAnimationFrame.bind(this),this.onWindowResize=this.onWindowResize.bind(this),this.initialise()}r.prototype.extend=function(){if(arguments.length>1)for(var t=arguments[0],e=1,i=arguments.length;e<i;e++){var s=arguments[e];for(var r in s)t[r]=s[r]}},r.prototype.data=function(t,e){return this.deserialize(t.getAttribute("data-"+e))},r.prototype.deserialize=function(t){return"true"===t||"false"!==t&&("null"===t?null:!isNaN(parseFloat(t))&&isFinite(t)?parseFloat(t):t)},r.prototype.camelCase=function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},r.prototype.ww=null,r.prototype.wh=null,r.prototype.wcx=null,r.prototype.wcy=null,r.prototype.wrx=null,r.prototype.wry=null,r.prototype.portrait=null,r.prototype.desktop=!navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry|BB10|mobi|tablet|opera mini|nexus 7)/i),r.prototype.motionSupport=!!t.DeviceMotionEvent,r.prototype.orientationSupport=!!t.DeviceOrientationEvent,r.prototype.orientationStatus=0,r.prototype.propertyCache={},r.prototype.initialise=function(){this.updateLayers(),this.updateDimensions(),this.enable(),this.queueCalibration(this.calibrationDelay)},r.prototype.updateLayers=function(){this.layers=this.element.viewersList.filter(function(t){return t.depth}),this.depths=[];for(var t=0,e=this.layers.length;t<e;t++){var i=this.layers[t];this.depths.push(i.depth)}},r.prototype.updateDimensions=function(){this.ww=t.innerWidth,this.wh=t.innerHeight,this.wcx=this.ww*this.originX,this.wcy=this.wh*this.originY,this.wrx=Math.max(this.wcx,this.ww-this.wcx),this.wry=Math.max(this.wcy,this.wh-this.wcy)},r.prototype.updateBounds=function(){this.ex=0,this.ey=0,this.ew=this.element.width,this.eh=this.element.height,this.ecx=this.ew*this.originX,this.ecy=this.eh*this.originY,this.erx=Math.max(this.ecx,this.ew-this.ecx),this.ery=Math.max(this.ecy,this.eh-this.ecy)},r.prototype.queueCalibration=function(t){clearTimeout(this.calibrationTimer),this.calibrationTimer=setTimeout(this.onCalibrationTimer,t)},r.prototype.enable=function(){this.enabled||(this.enabled=!0,this.orientationSupport?(this.portrait=null,t.addEventListener("deviceorientation",this.onDeviceOrientation),setTimeout(this.onOrientationTimer,this.supportDelay)):(this.cx=0,this.cy=0,this.portrait=!1,t.addEventListener("mousemove",this.onMouseMove)),t.addEventListener("resize",this.onWindowResize),this.raf=requestAnimationFrame(this.onAnimationFrame))},r.prototype.disable=function(){this.enabled&&(this.enabled=!1,this.orientationSupport?t.removeEventListener("deviceorientation",this.onDeviceOrientation):t.removeEventListener("mousemove",this.onMouseMove),t.removeEventListener("resize",this.onWindowResize),cancelAnimationFrame(this.raf))},r.prototype.calibrate=function(t,e){this.calibrateX=void 0===t?this.calibrateX:t,this.calibrateY=void 0===e?this.calibrateY:e},r.prototype.invert=function(t,e){this.invertX=void 0===t?this.invertX:t,this.invertY=void 0===e?this.invertY:e},r.prototype.friction=function(t,e){this.frictionX=void 0===t?this.frictionX:t,this.frictionY=void 0===e?this.frictionY:e},r.prototype.scalar=function(t,e){this.scalarX=void 0===t?this.scalarX:t,this.scalarY=void 0===e?this.scalarY:e},r.prototype.limit=function(t,e){this.limitX=void 0===t?this.limitX:t,this.limitY=void 0===e?this.limitY:e},r.prototype.origin=function(t,e){this.originX=void 0===t?this.originX:t,this.originY=void 0===e?this.originY:e},r.prototype.clamp=function(t,e,i){return t=Math.max(t,e),t=Math.min(t,i)},r.prototype.setPosition=function(t,e,i){t.x=e,t.y=i,t._paint()},r.prototype.onOrientationTimer=function(){this.orientationSupport&&0===this.orientationStatus&&(this.disable(),this.orientationSupport=!1,this.enable())},r.prototype.onCalibrationTimer=function(){this.calibrationFlag=!0},r.prototype.onWindowResize=function(){this.updateDimensions()},r.prototype.onAnimationFrame=function(){this.updateBounds();var t=this.ix-this.cx,e=this.iy-this.cy;(Math.abs(t)>this.calibrationThreshold||Math.abs(e)>this.calibrationThreshold)&&this.queueCalibration(0),this.portrait?(this.mx=this.calibrateX?e:this.iy,this.my=this.calibrateY?t:this.ix):(this.mx=this.calibrateX?t:this.ix,this.my=this.calibrateY?e:this.iy),this.mx*=this.ew*(this.scalarX/100),this.my*=this.eh*(this.scalarY/100),isNaN(parseFloat(this.limitX))||(this.mx=this.clamp(this.mx,-this.limitX,this.limitX)),isNaN(parseFloat(this.limitY))||(this.my=this.clamp(this.my,-this.limitY,this.limitY)),this.vx+=(this.mx-this.vx)*this.frictionX,this.vy+=(this.my-this.vy)*this.frictionY;for(var i=0,s=this.layers.length;i<s;i++){var r=this.layers[i],a=this.depths[i],n=this.vx*a*(this.invertX?-1:1),o=this.vy*a*(this.invertY?-1:1);this.setPosition(r,n,o)}this.raf=requestAnimationFrame(this.onAnimationFrame)},r.prototype.onDeviceOrientation=function(t){if(!this.desktop&&null!==t.beta&&null!==t.gamma){this.orientationStatus=1;var e=(t.beta||0)/30,i=(t.gamma||0)/30,s=this.wh>this.ww;this.portrait!==s&&(this.portrait=s,this.calibrationFlag=!0),this.calibrationFlag&&(this.calibrationFlag=!1,this.cx=e,this.cy=i),this.ix=e,this.iy=i}},r.prototype.onMouseMove=function(t){var e=t.clientX,i=t.clientY;!this.orientationSupport&&this.relativeInput?(this.clipRelativeInput&&(e=Math.max(e,this.ex),e=Math.min(e,this.ex+this.ew),i=Math.max(i,this.ey),i=Math.min(i,this.ey+this.eh)),this.ix=(e-this.ex-this.ecx)/this.erx,this.iy=(i-this.ey-this.ecy)/this.ery):(this.ix=(e-this.wcx)/this.wrx,this.iy=(i-this.wcy)/this.wry)},t.Parallax=r}(window,document)},function(t,e){t.exports=function(t,e,i){var s=Math.sin(i),r=Math.cos(i),a=e[4],n=e[5],o=e[6],h=e[7],l=e[8],c=e[9],u=e[10],p=e[11];e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[4]=a*r+l*s,t[5]=n*r+c*s,t[6]=o*r+u*s,t[7]=h*r+p*s,t[8]=l*r-a*s,t[9]=c*r-n*s,t[10]=u*r-o*s,t[11]=p*r-h*s,t}},function(t,e){t.exports=function(t,e,i){var s=Math.sin(i),r=Math.cos(i),a=e[0],n=e[1],o=e[2],h=e[3],l=e[8],c=e[9],u=e[10],p=e[11];e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[0]=a*r-l*s,t[1]=n*r-c*s,t[2]=o*r-u*s,t[3]=h*r-p*s,t[8]=a*s+l*r,t[9]=n*s+c*r,t[10]=o*s+u*r,t[11]=h*s+p*r,t}},function(t,e){t.exports=function(t,e,i){var s=Math.sin(i),r=Math.cos(i),a=e[0],n=e[1],o=e[2],h=e[3],l=e[4],c=e[5],u=e[6],p=e[7];e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[0]=a*r+l*s,t[1]=n*r+c*s,t[2]=o*r+u*s,t[3]=h*r+p*s,t[4]=l*r-a*s,t[5]=c*r-n*s,t[6]=u*r-o*s,t[7]=p*r-h*s,t}},function(t,e){t.exports=function(t,e,i,s){var r,a,n,o,h,l,c,u,p,d,f,m,y,v,g,_,w,x,b,k,T,I,L,E,M=s[0],F=s[1],D=s[2],N=Math.sqrt(M*M+F*F+D*D);if(Math.abs(N)<1e-6)return null;M*=N=1/N,F*=N,D*=N,r=Math.sin(i),a=Math.cos(i),n=1-a,o=e[0],h=e[1],l=e[2],c=e[3],u=e[4],p=e[5],d=e[6],f=e[7],m=e[8],y=e[9],v=e[10],g=e[11],_=M*M*n+a,w=F*M*n+D*r,x=D*M*n-F*r,b=M*F*n-D*r,k=F*F*n+a,T=D*F*n+M*r,I=M*D*n+F*r,L=F*D*n-M*r,E=D*D*n+a,t[0]=o*_+u*w+m*x,t[1]=h*_+p*w+y*x,t[2]=l*_+d*w+v*x,t[3]=c*_+f*w+g*x,t[4]=o*b+u*k+m*T,t[5]=h*b+p*k+y*T,t[6]=l*b+d*k+v*T,t[7]=c*b+f*k+g*T,t[8]=o*I+u*L+m*E,t[9]=h*I+p*L+y*E,t[10]=l*I+d*L+v*E,t[11]=c*I+f*L+g*E,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t}},function(t,e){t.exports=function(t,e,i){var s=i[0],r=i[1],a=i[2];return t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t[3]=e[3]*s,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}},function(t,e){t.exports=function(t,e,i){var s,r,a,n,o,h,l,c,u,p,d,f,m=i[0],y=i[1],v=i[2];e===t?(t[12]=e[0]*m+e[4]*y+e[8]*v+e[12],t[13]=e[1]*m+e[5]*y+e[9]*v+e[13],t[14]=e[2]*m+e[6]*y+e[10]*v+e[14],t[15]=e[3]*m+e[7]*y+e[11]*v+e[15]):(s=e[0],r=e[1],a=e[2],n=e[3],o=e[4],h=e[5],l=e[6],c=e[7],u=e[8],p=e[9],d=e[10],f=e[11],t[0]=s,t[1]=r,t[2]=a,t[3]=n,t[4]=o,t[5]=h,t[6]=l,t[7]=c,t[8]=u,t[9]=p,t[10]=d,t[11]=f,t[12]=s*m+o*y+u*v+e[12],t[13]=r*m+h*y+p*v+e[13],t[14]=a*m+l*y+d*v+e[14],t[15]=n*m+c*y+f*v+e[15]);return t}},function(t,e){t.exports=function(t,e,i){var s=e[0],r=e[1],a=e[2],n=e[3],o=e[4],h=e[5],l=e[6],c=e[7],u=e[8],p=e[9],d=e[10],f=e[11],m=e[12],y=e[13],v=e[14],g=e[15],_=i[0],w=i[1],x=i[2],b=i[3];return t[0]=_*s+w*o+x*u+b*m,t[1]=_*r+w*h+x*p+b*y,t[2]=_*a+w*l+x*d+b*v,t[3]=_*n+w*c+x*f+b*g,_=i[4],w=i[5],x=i[6],b=i[7],t[4]=_*s+w*o+x*u+b*m,t[5]=_*r+w*h+x*p+b*y,t[6]=_*a+w*l+x*d+b*v,t[7]=_*n+w*c+x*f+b*g,_=i[8],w=i[9],x=i[10],b=i[11],t[8]=_*s+w*o+x*u+b*m,t[9]=_*r+w*h+x*p+b*y,t[10]=_*a+w*l+x*d+b*v,t[11]=_*n+w*c+x*f+b*g,_=i[12],w=i[13],x=i[14],b=i[15],t[12]=_*s+w*o+x*u+b*m,t[13]=_*r+w*h+x*p+b*y,t[14]=_*a+w*l+x*d+b*v,t[15]=_*n+w*c+x*f+b*g,t}},function(t,e,i){"use strict";i.r(e);var s=new class{constructor(){this.FPS=30}get FPS(){return this._FPS}set FPS(t){this._FPS=t,this.RENDER_INTERVAL=1e3/this._FPS}};var r="object"==typeof window?window:{};const a="undefined"!=typeof WXEnvironment&&"iOS"==WXEnvironment.platform&&"function"==typeof deprecated_setInterval?deprecated_setInterval:setInterval,n=r.requestAnimationFrame||r.webkitRequestAnimationFrame||r.mozRequestAnimationFrame||r.oRequestAnimationFrame||r.msRequestAnimationFrame||function(t){return a?a(function(){t(+new Date)},25):setInterval(function(){t(+new Date)},25)},o="undefined"!=typeof WXEnvironment&&"iOS"==WXEnvironment.platform&&"function"==typeof deprecated_clearInterval?deprecated_clearInterval:clearInterval,h=r.cancelAnimationFrame||r.webkitCancelRequestAnimationFrame||r.mozCancelRequestAnimationFrame||r.oCancelRequestAnimationFrame||r.msCancelRequestAnimationFrame||function(t){o?o(t):clearInterval(t),t=null};var l=class{constructor(t,e){"function"==typeof t&&(e=t,t={}),this._tickers=[],this.state="not begin",this._handler=null,this._stop=null,this.fps=t&&t.fps,this.callback=e}set fps(t){this.interval=t?1e3/t:s.RENDER_INTERVAL}addTick(t){return this._tickers.push(t),this}removeTick(t){let e=this._tickers,i=e.indexOf(t);return e[i]=null,this}_tick(){this.state="run";for(let t=0;t<this._tickers.length;++t)this._tickers[t]&&this._tickers[t]._tick&&this._tickers[t]._tick(this);this._tickers=this._tickers.filter(t=>t),this.callback&&this.callback(this,this.state)}start(){let t=this,e=null;return t.state="run",t._stop=!1,t._handler||(t._handler=n(function i(s){if(+new Date(s)||(s=+new Date),!t._stop){if(null===e&&(e=s),t.interval){let i=s-e;i>t.interval&&(t._tick(),e=s-i%t.interval)}t._handler=n(i)}})),this}stop(){return this.state="over",this._stop=!0,this._handler&&(h&&h(this._handler),this._handler=null),this}};var c=class{constructor(t){this.target=t,this.init()}init(){this.target.on=this.on.bind(this.target),this.target.off=this.off.bind(this.target),this.target.emit=this.emit.bind(this.target)}on(t,e){this._listeners?this.off(t,e):this._listeners={},this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push(e)}off(t,e){if(!this._listeners)return;if(!this._listeners[t])return;let i=this._listeners[t];for(let t=0,s=i.length;t<s;t++)if(i[t]===e){i.splice(t,1);break}}emit(t,e){let i=!1,s=this._listeners;if(t&&s){let r=s[t];if(!r)return i;let a=null,n=(r=r.slice()).length;for(;n--;)a=r[n].bind(this),i=i||a(e)}return!!i}};const u=["touchstart","touchmove","touchend","tap","click"];var p=class extends c{on(t,e){let i=this;super.on(t,e),i.dom&&(i.dom.addEventListener(t,()=>{i.emit(t)}),~u.indexOf(t)&&(i.dom.style["pointer-events"]="all",i.canPointer="all"))}};var d=class extends c{on(t,e){let i=this;super.on(t,e),i.dom&&(i.dom.interactive=!0,i.dom.on({click:"touchstart"}[t],()=>{i.emit(t)}))}};var f=class extends c{on(t,e){let i=this;super.on(t,e),i.dom&&(i.dom.interactive=!0,i.dom.on({click:"tap"}[t],()=>{i.emit(t)}))}};var m=function(){let t=null;switch(this.rendererType){case"pixi":t=new f(this);break;case"hilo":t=new d(this);break;case"dom":t=new p(this);break;default:t=new c(this)}return t};class y{constructor(t){if(!y.Renderer)throw Error("dont have render");this.init(t)}init(t){this.rect={},this.rendererType=t.rendererType,this.renderer=y.Renderer.bind(this)(),this.events=m.bind(this)()}_create(){}_mergeRect(t){for(let e in t.rect)switch(this.rect[e]=isNaN(this.rect[e])?t.rect[e]:this.rect[e],e){case"top":case"left":t.rect[e]<this.rect[e]&&(this.rect[e]=t.rect[e]);break;case"bottom":case"right":t.rect[e]>this.rect[e]&&(this.rect[e]=t.rect[e])}}_addChild(t){this.viewersList=this.viewersList||[],this.viewersList.push(t),this.renderer.addChild(t)}addChild(t){return t.container=this,this}appendTo(t){return this.container=t,this}_paint(){}}var v=y,g=i(0),_=i.n(g);const w={linear:function(t,e,i,s){return e+t*i/s},easeInQuad:function(t,e,i,s){return i*(t/=s)*t+e},easeOutQuad:function(t,e,i,s){return-i*(t/=s)*(t-2)+e},easeInOutQuad:function(t,e,i,s){return(t/=s/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,i,s){return i*(t/=s)*t*t+e},easeOutCubic:function(t,e,i,s){return i*((t=t/s-1)*t*t+1)+e},easeInOutCubic:function(t,e,i,s){return(t/=s/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,i,s){return i*(t/=s)*t*t*t+e},easeOutQuart:function(t,e,i,s){return-i*((t=t/s-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,i,s){return(t/=s/2)<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,i,s){return i*(t/=s)*t*t*t*t+e},easeOutQuint:function(t,e,i,s){return i*((t=t/s-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,i,s){return(t/=s/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,i,s){return-i*Math.cos(t/s*(Math.PI/2))+i+e},easeOutSine:function(t,e,i,s){return i*Math.sin(t/s*(Math.PI/2))+e},easeInOutSine:function(t,e,i,s){return-i/2*(Math.cos(Math.PI*t/s)-1)+e},easeInExpo:function(t,e,i,s){return 0===t?e:i*Math.pow(2,10*(t/s-1))+e},easeOutExpo:function(t,e,i,s){return t===s?e+i:i*(1-Math.pow(2,-10*t/s))+e},easeInOutExpo:function(t,e,i,s){return 0===t?e:t===s?e+i:(t/=s/2)<1?i/2*Math.pow(2,10*(t-1))+e:i/2*(2-Math.pow(2,-10*--t))+e},easeInCirc:function(t,e,i,s){return-i*(Math.sqrt(1-(t/=s)*t)-1)+e},easeOutCirc:function(t,e,i,s){return i*Math.sqrt(1-(t=t/s-1)*t)+e},easeInOutCirc:function(t,e,i,s){return(t/=s/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,i,s){let r=1.70158,a=0,n=i;return 0===t?e:1==(t/=s)?e+i:(a||(a=.3*s),n<Math.abs(i)?(n=i,r=a/4):r=a/(2*Math.PI)*Math.asin(i/n),-n*Math.pow(2,10*(t-=1))*Math.sin((t*s-r)*(2*Math.PI)/a)+e)},easeOutElastic:function(t,e,i,s){let r=1.70158,a=0,n=i;return 0===t?e:1==(t/=s)?e+i:(a||(a=.3*s),n<Math.abs(i)?(n=i,r=a/4):r=a/(2*Math.PI)*Math.asin(i/n),n*Math.pow(2,-10*t)*Math.sin((t*s-r)*(2*Math.PI)/a)+i+e)},easeInOutElastic:function(t,e,i,s){let r=1.70158,a=0,n=i;return 0===t?e:2==(t/=s/2)?e+i:(a||(a=s*(.3*1.5)),n<Math.abs(i)?(n=i,r=a/4):r=a/(2*Math.PI)*Math.asin(i/n),t<1?n*Math.pow(2,10*(t-=1))*Math.sin((t*s-r)*(2*Math.PI)/a)*-.5+e:n*Math.pow(2,-10*(t-=1))*Math.sin((t*s-r)*(2*Math.PI)/a)*.5+i+e)},easeInBack:function(t,e,i,s,r){return void 0===r&&(r=1.70158),i*(t/=s)*t*((r+1)*t-r)+e},easeOutBack:function(t,e,i,s,r){return void 0===r&&(r=1.70158),i*((t=t/s-1)*t*((r+1)*t+r)+1)+e},easeInOutBack:function(t,e,i,s,r){return void 0===r&&(r=1.70158),(t/=s/2)<1?i/2*(t*t*((1+(r*=1.525))*t-r))+e:i/2*((t-=2)*t*((1+(r*=1.525))*t+r)+2)+e},easeInBounce:function(t,e,i,s){return i-w.easeOutBounce(s-t,0,i,s)+e},easeOutBounce:function(t,e,i,s){return(t/=s)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(t,e,i,s){return t<s/2?.5*w.easeInBounce(2*t,0,i,s)+e:.5*w.easeOutBounce(2*t-s,0,i,s)+.5*i+e}};var x=class{constructor(t,e){if(!e)throw new Error("Effect must hava param");if(!t)throw new Error("Effect must hava type");this.type=t,this.param=e,this.delay=e.delay||0,this.duration=e.duration||0,this._state=this.lastState="not begin",this.events=new c(this)}get target(){return this._target}set target(t){this._target=t,this._init()}set state(t){t!=this._state&&(this.lastState=this._state,this._state=t)}get state(){return this._state}set delay(t){this._delay=t,this.totalTime=this.duration+this.delay,this.delayFrames=t/s.RENDER_INTERVAL}get delay(){return this._delay}set duration(t){this._duration=t,this.totalTime=this.duration+this.delay,this.frames=t/s.RENDER_INTERVAL||1}get duration(){return this._duration||0}check(t){return"over"===this.state?this.state:(t*s.RENDER_INTERVAL-this._delay>this._duration?this.state="over":t*s.RENDER_INTERVAL-this._delay<0?this.state="not begin":this.state="run",this.state)}reset(){let t=this.param;this.delay=t.delay,this.state="not begin",this.hasHandle=!1}_init(){let t="_"+this.type;if(!this[t])throw new Error("dont have this type effect");this.handler=this[t]()}_moveTo(t){if(!(t=t||this.param).val)throw new Error("missing param val");let e=_()({},t),i=_()({},t);e.val=e.val.x,i.val=i.val.y;let s=this._moveXTo(e),r=this._moveYTo(i);return s=s&&s.bind(this),r=r&&r.bind(this),function(t){let e=s&&s(t),i=r&&r(t);return _()({},e,i)}}_moveXTo(t){if(t=t||this.param,isNaN(parseFloat(t.val)))return null;let e=+this.target.x;return function(i){let s=+t.val*this.target.pt,r=t.easing,a=i-this.delayFrames,n=s-e;return{x:this._interpolate(r,a,e,n,this.frames)}}}_moveYTo(t){if(t=t||this.param,isNaN(parseFloat(t.val)))return null;let e=+this.target.y;return function(i){let s=+t.val*this.target.pt,r=t.easing,a=i-this.delayFrames,n=s-e;return{y:this._interpolate(r,a,e,n,this.frames)}}}_rotateTo(t){if(t=t||this.param,isNaN(parseFloat(t.val)))return null;let e=+this.target.rotate;return function(i){let s=t.easing,r=i-this.delayFrames,a=+t.val-e;return{rotate:this._interpolate(s,r,e,a,this.frames)}}}_scaleTo(t){if(!(t=t||this.param).val)throw new Error('missing param "val"');let e=_()({},t),i=_()({},t);e.val=e.val.scaleX,i.val=i.val.scaleY;let s=this._scaleXTo(e),r=this._scaleYTo(i);return s=s&&s.bind(this),r=r&&r.bind(this),function(t){let e=s&&s(t),i=r&&r(t);return _()({},e,i)}}_scaleXTo(t){if(t=t||this.param,isNaN(parseFloat(t.val)))return null;let e=+this.target.scaleX;return function(i){let s=+t.val-e,r=t.easing,a=i-this.delayFrames;return{scaleX:this._interpolate(r,a,e,s,this.frames)}}}_scaleYTo(t){if(t=t||this.param,isNaN(parseFloat(t.val)))return null;let e=+this.target.scaleY;return function(i){let s=+t.val-e,r=t.easing,a=i-this.delayFrames;return{scaleY:this._interpolate(r,a,e,s,this.frames)}}}_opacityTo(t){if(t=t||this.param,isNaN(parseFloat(t.val)))return null;let e=+this.target.opacity;return function(i){let s=+t.val-e,r=t.easing,a=i-this.delayFrames;return{opacity:this._interpolate(r,a,e,s,this.frames)}}}_keyFrame(t){t=t||this.param;let e=this;return function(i){let s=i-this.delayFrames;if((s=this._interpolate(t.easing,s,0,this.frames,this.frames)).toFixed(2)>this.frames.toFixed(2))return;let r=Math.round(this.frames/t.times);s.toFixed(2)!==this.frames.toFixed(2)?s%=r:s=r;let a=Math.round(s/r*100),n=null,o=null,h=0,l=0;for(let e in t.keyFrame){let i=parseInt(e);if(a<=i){h=Math.round(r*i/100),n=t.keyFrame[e];break}l=Math.round(r*i/100),o=t.keyFrame[e]}let c={};for(let t in n){"x"!==t&&"y"!==t||(n[t]*=e._target.pt);let i=null!==o?o[t]:0,r=n[t]-i;c[t]=this._interpolate("linear",s-l,i,r,h-l)}return c}}_pathMove(t){let e=(t=t||this.param).val.path,i=t.val.autoReverse,s=(t.duration,t.times,document.createElementNS("http://www.w3.org/2000/svg","path"));s.setAttribute("d",e);let r=(e=s).getTotalLength(),a={},n={};return n.x=+this.target.width/2,n.y=+this.target.height/2,a.x=0,a.y=0,a.index=+this.target.frameIndex,function(s){let o={},h=s-this.delayFrames;if((h=this._interpolate(t.easing,h,0,this.frames,this.frames))===a.index)return;let l=h/this.frames,c=e.getPointAtLength(r*l);return o.x=c.x*this.target.pt-n.x,o.y=c.y*this.target.pt-n.y,i&&(h>a.index?o.rotate=180*Math.atan2(o.y-a.y,o.x-a.x)/Math.PI:o.rotate=Math.ceil(180+180*Math.atan2(o.y-a.y,o.x-a.x)/Math.PI)),a.x=o.x,a.y=o.y,a.index=h,o}}_shake(t){let e=(t=t||this.param).val,i=this._keyFrame({keyFrame:{"25%":{rotate:-10},"75%":{rotate:10},"100%":{rotate:0}},easing:"linear",times:e});return i=i&&i.bind(this),function(e){let s=e-this.delayFrames;return e=(s=this._interpolate(t.easing,s,0,this.frames,this.frames))+this.delayFrames,i(e)}}_interpolate(t,e,i,s,r){return w[t]||console.warn(`${t} not support degrade to linear`),(w[t]||w.linear)(e,i,s,r)}setIndex(t){if(!(t<this.delayFrames))return this.check(t),this.handler(t)}};var b=class{constructor(t){this.viewer=t.viewer,this.loop=t.loop,this._state="not begin",this._index=0,this.runTime=0,this.effectList=[],this.effectGroup=[],this.extraEffects=[],this.sameTimeAnimationList=[],this.loopList=t.abLoops||[],this.subLoopTimes=this.loopList.map(t=>t.loop),this.events=new c(this),this._bindEffectGroup(t.effectGroup)}get state(){return this._state}set state(t){t!=this._state&&(this._state=t,"over"===t&&(this.runTime=0,this._watchHold()),"hold"===t&&this._watchHold(),this.emit(t))}get index(){return this._index}set index(t){this._index=t,t&&(this._effectListHandler(),this.runTime=t*s.RENDER_INTERVAL.toFixed(4),this._checkSubLoop(),this._update())}_bindEffectGroup(t){let{viewer:e}=this,i=0;for(let e=0;e<t.length;++e){let s=0,r=this._parseEffectList(t[e]);r=r.map(t=>{let e=new x(t.type,t.param);return s+=e.totalTime,e}),s>i&&(i=s);let a={list:r,running:!1,over:!1,pointer:0};this._addEffectList(a)}let s=0;for(let t=0;t<this.loopList.length;++t)this.loopList[t].loop>0&&(s+=(this.loopList[t].b-this.loopList[t].a)*(this.loopList[t].loop-1));this.totalTime=i+s}_parseEffectList(t){let e=t.type,i=t.effects,s=[];~["move","moveX","moveY","scale","scaleX","scaleY","skewX","skewY","rotate","opacity"].indexOf(e)&&(e+="To");for(let t=0;t<i.length;++t){let r={},a=i[t];if(void 0===a.delay&&void 0===a.duration)break;r.type=e,r.param=a,s.push(r)}return s}_effectListHandler(){for(let t=0;t<this.effectGroup.length;++t){if(this.effectGroup[t].over||this.effectGroup[t].running)continue;let e=this.effectGroup[t],i=e.pointer,s=e.list&&e.list[i];s&&(s.effectList=e,e.running=!0,this._addEffect(s)),e.pointer++}}_getAvilEffectList(){let t=[];for(let e=0;e<this.effectList.length;++e){let i=this.effectList[e],s=i.check(this.index);if("over"!==i.state)"run"===s&&t.push(i);else if("not begin"==i.lastState){let t=i.setIndex(i.frames+i.delayFrames),e=this._calculateOffset(t);this.viewer._mergeAttr(e)}}return t}_checkEffects(){let t=!1;for(let e=0;e<this.effectList.length;++e){let i=this.effectList[e];i.hasHandle||("over"===i.check(this.index)?(i.state="over",i.hasHandle=!0,i.effectList&&(t=this._checkEffectList(i.effectList))&&this._update()):t=!0)}return t}_checkEffectList(t){return t.list.length>t.pointer?(t.running=!1,this._effectListHandler(),!0):(t.running=!1,t.over=!0,this._checkEffectGroup())}_checkEffectGroup(){return!this.effectGroup.every(function(t){return t.over})||!this.extraEffects.every(function(t){return t.over})}_resetViewer(){this.viewer._reset()}_calculateOffset(t,e){let i=e||{};for(let e in t)void 0===i[e]&&(i[e]="scaleX"===e||"scaleY"===e?1:0),"scaleX"===e||"scaleY"===e?(0===this.viewer[e]&&(this.viewer[e]=1e-9),i[e]*=t[e]/this.viewer[e]):i[e]+=t[e]-this.viewer[e];return i}_tick(t){this.ticker=t,this.index++,this.viewer._paint()}_update(){let t={},e=this._getAvilEffectList();if(e.length&&(e.forEach(e=>{let i=e.setIndex(this.index);t=this._calculateOffset(i,t)}),this.viewer._mergeAttr(t),this.emit("update",this.index)),!this._checkEffects()){if(this.loop&&("infinite"===this.loop||this.loop>1)){if(!this.effectGroup.length)return;return isNaN(this.loop)||this.loop--,this.pause(),this.state="hold",!0}this.stop()}}_resetEffect(){this._clearEffectList(),this._resetEffectGroup()}_resetEffectGroup(){return this.effectGroup.forEach(function(t){t.pointer=0,t.running=!1,t.over=!1,t.list.forEach(function(t){t.reset()})}),this}_addEffect(t){this.state="run",t.target=this.viewer;let e=t.effectList;if(e&&e.pointer>0){let i=e.list[e.pointer-1];t.delay+=i.duration+i.delay}else this.index>1&&(t.delay+=this.runTime);return t.effectList||this.extraEffects.push(t),this.effectList.push(t),this}_clearEffectList(){return this.effectList=[],this}_addEffectList(t){return this.effectGroup.push(t),this}_isTriggerSubLoop(t,e){return t<=e.b&&t+s.RENDER_INTERVAL>e.b}_checkSubLoop(){for(let t=0;t<this.loopList.length;t++)if(this._isTriggerSubLoop(this.runTime,this.loopList[t])&&this.subLoopTimes[t]>1)return this.subLoopTimes[t]--,void this.setIndex(this.loopList[t].a/s.RENDER_INTERVAL)}_watchHold(){"hold"!==this.state&&"over"!=this.state||this.sameTimeAnimationList.every(t=>"hold"===t.state||"over"===t.state)&&this.sameTimeAnimationList.forEach(t=>{"hold"==t.state&&t.reset()})}reset(){this.subLoopTimes=this.loopList.map(t=>t.loop),this._resetEffect(),this.setIndex(0),this.tickerStop&&(this.state="run",this.tickerStop=!1,this.ticker&&this.ticker.addTick(this))}setIndex(t){t=t||1,this._resetEffect(),this._resetViewer(),this.runTime=0,this.index=t,this.viewer._paint()}play(){}stop(){this.state="over",this.tickerStop=!0,this.ticker&&this.ticker.removeTick(this)}pause(){this.tickerStop=!0,this.ticker&&this.ticker.removeTick(this)}resume(){}replay(){}};var k=class extends v{constructor(t){super(t),this.selfInit(t)}selfInit(t){if(this.container=this.renderer.getContainer(t&&t.container),!t)throw new Error("stage must have param");if(!this.container)throw new Error(`the contianer ${t.container} not found`);this.stage=this,this.ticker=null,this.type="stage",this.pt=this.container.offsetWidth/t.width,this.width=t.width*this.pt,this.height=t.height*this.pt,this.id=t.id||+new Date,this.backgroundColor=t.backgroundColor||"transparent",this.viewersList=t.viewerList||[],this.dpr=t.dpr||2,this.preventDefault=t.preventDefault,this.name=t.name,this._create()}_create(){super._create(),this.renderer.renderStage(this.name)}removeViewer(t){let e=this.viewersList,i=e.indexOf(t);return i>=0&&e.splice(i,1),this}destroy(){this.viewersList.forEach(function(t){t.destroy()}),this.renderer.removeStage()}paint(){this.renderer.updateStage()}};var T=class extends v{constructor(t){super(t),t=t||{},this.id=t.id,this.name=t.name,this.type="viewer",this.x=Number(t.x)||0,this.y=Number(t.y)||0,this.width=Number(t.width)||0,this.height=Number(t.height)||0,this.pivot={x:this.width/2,y:this.height/2},this.texture=null,this.opacity=Number(parseFloat(t.opacity))||0,this.rotate=parseFloat(t.rotate)||0,this.scaleX=Number(parseFloat(t.scaleX))||1,this.scaleY=Number(parseFloat(t.scaleY))||1,this.backgroundColor=t.backgroundColor||"transparent",this.backgroundImage=t.backgroundImage||"",this.link=t.link,this.linkType=t.linkType,this.zIndex=Number(t.zIndex)||0,this.depth=t.depth,this.ticker=null,this.pt=1,this.index=0,this.originData={};for(let t in this)"number"!=typeof this[t]&&"string"!=typeof this[t]||(this.originData[t]=this[t])}get container(){return this._container}set container(t){this._container=t,this._addToContainer()}_create(){super._create(),this.renderer.renderViewer()}_calculateRect(){return this.renderer.getRect()}_addToContainer(){this.pt=this.originData.pt=this.container.pt,this.stage=this.container.stage,this.x=this.originData.x*=this.pt,this.y=this.originData.y*=this.pt,this.width=this.originData.width*=this.pt,this.height=this.originData.height*=this.pt,this._create(),this.container._addChild(this),this.container._mergeRect(this),this._paint(),this.container._paint()}_mergeAttr(t){for(let e in t)isNaN(t[e])||("scaleX"===e||"scaleY"===e?this[e]*=t[e]:this[e]+=t[e])}_reset(){for(let t in this.originData)this[t]=this.originData[t];return this}_paint(){this.renderer.updateViewer()}destroy(){this.renderer.removeViewer()}stop(){this.ticker&&this.ticker.removeTick(this)}};var I=class extends T{constructor(t){super(t),this.type="frames",this.image=t&&t.image,this.frameNum=t&&t.frameNum,this.interval=t&&t.interval||16,this.frameLoop=t&&t.frameLoop||"infinite",this.times=1,this._lastTime=0,this._imageDom=null,this.frameDirect=t&&t.direction||"horizontal",this._frameIndex=0,this.startTime=0,this.delay=t&&t.delay||0,this.framesData=t&&t.framesData,this.framesData&&(this.newVersion=!0,this.frameNum=this.framesData.frameNum)}_init(){}_create(){super._create(),this._init(),this.renderer.renderFrames()}_updateTexture(){this._imageDom&&this.renderer.updateFrames()}_tick(t){this.ticker=t;let e=+new Date;this.startTime||(this.startTime=e),e-this.startTime<this.delay||this.frameEnd||e-this._lastTime>this.interval&&(this._lastTime=e,this.frameIndex++,this.frameIndex>=this.frameNum&&(("infinite"==this.frameLoop||+this.times<this.frameLoop)&&(this.frameIndex=0),"infinite"!==this.frameLoop&&(this.times++,+this.times>this.frameLoop&&(this.frameEnd=!0,this.stop()))))}get frameIndex(){return this._frameIndex}set frameIndex(t){this._frameIndex=t,this.frameIndex<this.frameNum&&this._updateTexture()}stop(){this.state="run","infinite"!==this.frameLoop&&+this.times>this.frameLoop&&(this.state="over"),"over"===this.state&&this.ticker.removeTick(this)}};var L=class extends T{constructor(t){super(t),this.type="text",this.content=t.content,this.style=t.style||{}}_create(){super._create(),this.renderer.renderText()}};var E=class extends T{constructor(t){super(t),this.type="group",this.viewersList=[]}_create(){super._create(),this.renderer.renderGroup(),this.viewersList.forEach(t=>{this.addChild(t)})}_calculateRect(){return{}}_paint(){super._paint(),this.renderer.updateGroup()}};i(3);class M{constructor(t){let e=null;try{e=JSON.parse(JSON.stringify(t.data))}catch(t){console.error(t)}if(this.stageData=e.stage,!this.stageData)throw new Error("aliveData must hava stage");if(this.movieClipsData=e.children||e.movieClips,!this.movieClipsData)throw new Error("aliveData must hava movieClips");this.loop=1,this.stage=null,this._resourceList=[],this.viewersList=[],this.animationList=[],this._isInit=!1,this.container=t.container,this.preventDefault=t.preventDefault,this.rendererType=t.rendererType||"dom",this.dataHandler=t.dataHandler,this.name=t.name,this.state="not begin",this.currentIndex=0,this.totalTime=0,this.maxTime=1/0,this.events=new c(this),this._init()}get runTime(){return this.currentIndex*s.RENDER_INTERVAL}static setRenderer(t){v.Renderer=t}static _parseMcData(t){let e={};return e.id=t.id,e.name=t.name,e.type=t.type,e.x=t.style.left,e.y=t.style.top,e=_()(!0,e,t.style),"sprite"===t.type?(e.frameLoop=t.data.loop,e.image=t.data.src,e=_()(e,t.data)):e.backgroundImage=t.data.src,e}static mcTimeMachine(t,e){try{t=JSON.parse(JSON.stringify(t))}catch(t){console.error(t)}let i=t.animation,r=t.animation.effectsGroup;t=M._parseMcData(t);let a=new T(t);if(r){let t=new b({viewer:a,effectGroup:r,loop:i.loop,abLoops:i.abLoops}),n=e/s.RENDER_INTERVAL;t.setIndex(n)}return a}get state(){return"over"===this.ticker.state||"over"==this._state?"over":this.animationList.some(t=>"run"===t.state||"hold"===t.state||"not begin"===t.state)?this._state:"over"}set state(t){this._state=t}_parsePlugins(t){let e={};if(t.plugins)for(let i=0;i<t.plugins.length;++i){let s=t.plugins[i];s&&"parallax"===s.type&&(e.depth=s.param&&s.param.depth)}return e}_parseEvents(t){let e={};if(t.events)for(let i=0;i<t.events.length;++i){let s=t.events[i];"click"===s.eventType&&"link"===s.action.type&&(e.link=t.events[i].action.param.href,e.linkType=t.events[i].action.param.target)}return e}_handleMcData(t){this.dataHandler&&this.dataHandler(t);let e=M._parseMcData(t);return e.framesData&&e.framesData.fileList.map(t=>{this._resourceList.push(t.url)}),t.data.src&&this._resourceList.push(t.data.src),e=_()(!0,e,this._parsePlugins(t)),e=_()(!0,e,this._parseEvents(t))}_init(){if(!this._isInit)return this._isInit=!0,this.ticker=new l,this.animationMap={},this._parseChildren(this.movieClipsData,this),this}_parseChildren(t,e){if(t)for(let i=t.length-1;i>=0;--i){let s=t[i].animation||{};if(s&&s.length);else{let r=s.effectsGroup,a=this._handleMcData(t[i]),n=null;if(a.zIndex=t.length-i,a.rendererType=a.rendererType||this.rendererType,"group"===a.type?(n=new E(a),this._parseChildren(t[i].children,n)):"sprite"===a.type?(n=new I(a),this.ticker.addTick(n)):n=new T(a),e.viewersList.push(n),r){s.abLoops=s.abLoops||[];let t=new b({viewer:n,effectGroup:r,loop:s.loop,abLoops:s.abLoops.map(t=>(t.loop=Number(t.loop)||0,t))});this.animationList.push(t),t.totalTime>this.totalTime&&(this.totalTime=t.totalTime),this.animationMap[t.totalTime]=this.animationMap[t.totalTime]||[],this.animationMap[t.totalTime].push(t),t.sameTimeAnimationList=this.animationMap[t.totalTime]}}}}_tick(){if(this.currentIndex++,this.emit("update"),!(this.runTime>=this.maxTime))return this.ticker._tickers.length<=1?"infinite"!==this.loop&&+this.loop<=1||!this.loop?void this.stop():("infinite"==this.loop&&(this.loop=1/0),this.loop--,void this.replay()):void this.stage.paint();this.stop()}render(){const t=this.stage=new k({id:this.stageData.id,width:this.stageData.width,height:this.stageData.height,backgroundColor:this.stageData.backgroundColor,container:this.container,rendererType:this.stageData.rendererType||this.rendererType,preventDefault:this.preventDefault,name:this.name});this.viewersList.forEach(e=>{if(e.depth){new E({depth:e.depth,zIndex:e.zIndex,rendererType:e.rendererType,opacity:1}).appendTo(t).addChild(e);delete e.depth}else e.appendTo(t)});const e=this.stageData.plugins;if(e)for(let i=0;i<e.length;++i){let s=e[i],a=e[i].param;"parallax"===s.type&&new r.Parallax(t,{scalarX:a.x,scalarY:a.y})}this.ticker.addTick(this),this.animationList.forEach(t=>{this.ticker.addTick(t)})}preload(t,e){let i=0,s=this._resourceList.length,a=this,n=!1;e=e||6e3;let o=M.Image||r.Image;for(let e=0;e<s;++e){!function(r){r.onload=function(){++i>=s&&!n&&(n=!0,t&&t())},r.src=a._resourceList[e]}(new o)}setTimeout(()=>{!n&&t&&t(),n=!0},e)}play(){return"not begin"==this.state?(this.emit("start"),this.ticker.start()):this.replay(),this.state="run",this}_stop(){this.state="over",this.ticker.stop()}_resume(){this.state="run",this.ticker.start()}stop(){return this._stop(),this.emit("over"),this.emit("update"),this}replay(){this.emit("replay"),this._stop(),this.animationList.forEach(t=>{t.reset()}),this.currentIndex=0,this._resume()}pause(){return this.state="over",this.emit("pause"),this.emit("update"),this.ticker.stop(),this}resume(){return"over"==this.state&&(this._resume(),this.emit("resumue"),this.emit("update")),this}destroy(){return this.ticker.stop(),this.viewersList.forEach(function(t){t.destroy()}),this.stage.destroy(),this}find(t,e){return this.viewersList.filter(i=>i[t]===e)}findOne(t,e){let i=this.find(t,e);return i&&i[0]}setIndex(t){this.currentIndex=t,this.animationList.forEach(e=>{e.setIndex(t)})}playTo(t){this.maxTime=this.totalTime*t/100,this.ticker.start()}}M.Animation=b,M.Container=v,M.Stage=k,M.Viewer=T,M.Frames=I,M.Text=L,M.Group=E,M.Effect=x,M.Ticker=l,M.GLOBAL=s;var F=M,D=i(1),N=i.n(D);var O=class{constructor(t){this.target=t}getContainer(t){return this.target,"string"==typeof t?document.querySelector(t):t}renderStage(){}updateStage(){}removeStage(){}addChild(t){}renderViewer(){}updateViewer(){}removeViewer(){}renderFrames(){}updateFrames(){}renderText(){let t=this.target;["fontSize"].forEach(e=>{t.style[e]*=t.pt})}renderGroup(){}updateGroup(){}};var R=class extends O{getContainer(t){return super.getContainer(t)}renderStage(t){super.renderStage();let e=this.target;if(!document.querySelectorAll(`.J_alive_stage_${e.id}`).length){let i=e.dom=document.createElement("div");i.className=`J_alive_stage J_alive_stage_${e.id} J_alive_${t}`,i.style.position="relative",i.style.background=e.backgroundColor,i.style.width=`${e.width}px`,i.style.height=`${e.height}px`,i.style.overflow="hidden",i.setAttribute("data-spm","moying"),e.container.appendChild(i)}}removeStage(){super.removeStage();let t=this.target;try{t.dom.remove()}catch(t){}}addChild(t){super.addChild(t),this.target.dom.appendChild(t.dom),t.rect=t._calculateRect()}renderViewer(){super.renderViewer();let t=this.target;if(t.link&&t.link.length){let e=t.dom=document.createElement("a");"blank"==t.linkType&&e.setAttribute("target","_blank"),e.href=t.link,e.className=`J_alive_viewer J_alive_viewer_${t.id}`,t.canPointer="all"}else(t.dom=document.createElement("div")).className=`J_alive_viewer J_alive_viewer_${t.id}`,t.canPointer="none";if(t.backgroundImage&&t.backgroundImage.length){let e=document.createElement("img");~t.backgroundImage.indexOf("gif")&&(~t.backgroundImage.indexOf("?")?t.backgroundImage+="&getAvatar=1":t.backgroundImage+="?getAvatar=1"),e.src=t.backgroundImage,e.style.display="block",e.style.width="100%",e.style.height="100%",t.dom.appendChild(e)}let e=t.dom;t.pivot.x=t.width/2,t.pivot.y=t.height/2,e.style.position="absolute",e.style.left=`${t.x}px`,e.style.top=`${t.y}px`,t.width&&t.height&&(e.style.width=`${t.width}px`,e.style.height=`${t.height}px`),e.style.overflow="hidden",e.style["-webkit-background-size"]="100%",e.style["-webkit-tap-highlight-color"]="transparent",e.style["-webkit-touch-callout"]="none",e.style["-webkit-user-select"]="none",e.style["user-select"]="none",e.style["-webkit-transform-style"]="preserve-3d",e.style["-webkit-perspective"]="1000",e.style["-webkit-backface-visibility"]="hidden",e.style["pointer-events"]="none"}_setTransform(t){let e=`translate3d(${t.x-t.originData.x}px, ${t.y-t.originData.y}px, 0)`,i=`rotate(${t.rotate}deg)`,s=`scale(${t.scaleX}, ${t.scaleY})`;return N()(`${e} ${i} ${s}`)}updateViewer(){super.updateViewer();let t=this.target,e=t.dom,i=this._setTransform(t);e&&(t.width&&t.height&&(e.style.width=`${t.width}px`,e.style.height=`${t.height}px`),t.opacity?e.style["pointer-events"]=t.canPointer:e.style["pointer-events"]="none",e.style.backgroundColor=t.backgroundColor,e.style.opacity=t.opacity,e.style["z-index"]=t.zIndex,e.style["-webkit-transform"]=`matrix3d(${i})`)}removeViewer(){super.removeViewer(),this.target.dom.remove(0)}renderFrames(){super.renderFrames();let t=this.target;if(t.newVersion){let{frames:e,fileList:i}=t.framesData,s=e[t.frameIndex],r=i[s.fileIndex],a=document.createElement("canvas"),n=t.ctx=a.getContext("2d");i=i.map(t=>{let e=new Image;return e.src=t.url,t.imageObj=e,t}),a.width=2*t.width,a.height=2*t.height,a.style.position="absolute",a.style.let="0",a.style.top="0",a.style.width=`${t.width}px`,a.style.height=`${t.height}px`;let o=new Image;o.onload=(()=>{let e=s.rect;n.drawImage(o,e[0],e[1],e[2],e[3],0,0,2*t.width,2*t.height)}),o.src=r.url,t.fileIndex=0,t._imageDom=a,t.dom.appendChild(t._imageDom)}else{if(!t.image)return;let e=t._imageDom=document.createElement("img");if(e.style.position="absolute",e.style.let="0",e.style.top="0",e.src=t.image,"horizontal"===t.frameDirect){let i=t.width*t.frameNum;e.style["max-width"]="none",e.style.width=`${i}px`,e.style.height="100%"}else{let i=t.height*t.frameNum;e.style.width="100%",e.style.height=`${i}px`}e.style["transform-style"]="preserve-3d",e.style["-webkit-perspective"]="1000",e.style["pointer-events"]="none",e.style["-webkit-backface-visibility"]="hidden",t.dom.appendChild(e)}}updateFrames(){super.updateFrames();let t=this.target;if(t.newVersion){const{frames:e,fileList:i}=t.framesData;let s=e[t.frameIndex],r=i[s.fileIndex];t.fileIndex!=s.fileIndex&&(t.fileIndex=s.fileIndex);let a=r.imageObj,n=s.rect;t.ctx.clearRect(0,0,2*t.width,2*t.height),t.ctx.drawImage(a,n[0],n[1],n[2],n[3],0,0,2*t.width,2*t.height)}else if("horizontal"===t.frameDirect){let e=-t.width*t.frameIndex;t._imageDom.style["-webkit-transform"]=`translate3d(${e}px, 0, 0)`}else{let e=-t.height*t.frameIndex;t._imageDom.style["-webkit-transform"]=`translate3d(0, ${e}px, 0)`}}renderText(){super.renderText();let t=this.target,e=document.createElement("span"),i=["fontSize"];t.dom.style.width="auto",t.dom.style.height="auto",e.style["white-space"]="nowrap",e.innerHTML=t.content;for(let s in t.style)~i.indexOf(s)?e.style[s]=`${t.style[s]}px`:e.style[s]=t.style[s];t.dom.appendChild(e)}renderGroup(){super.renderGroup();let t=this.target,e=t.dom=document.createElement("div");e.className="layer",e.style.position="absolute",e.style.left=`${t.x}px`,e.style.top=`${t.y}px`,e.style.width="100%",e.style.height="100%",e.style["pointer-events"]="none",e.style["-webkit-transform-style"]="preserve-3d",e.style["-webkit-perspective"]="1000",e.style["-webkit-backface-visibility"]="hidden",e.style["z-index"]=t.zIndex,e.setAttribute("data-depth",t.depth)}updateGroup(){let t=this.target,e=t.rect,i=t.dom,s=(e.left+e.right)/2,r=(e.top+e.bottom)/2;i.style["-webkit-transform-origin"]=`${s}px ${r}px`}getRect(){let t=this.target,e=getComputedStyle(t.dom),i={},s=parseFloat(e.left),r=parseFloat(e.top),a=parseFloat(e.width),n=parseFloat(e.height);return a&&n?(i.left=s,i.top=r,i.right=s+a,i.bottom=r+n,i):{}}};var C=function(){let t=null;switch(this.rendererType){case"pixi":break;case"dom":t=new R(this);break;case"hilo":break;default:t=new R(this)}return t};F.setRenderer(C);e.default=F}])});